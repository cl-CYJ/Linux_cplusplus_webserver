# 项目进度记录（始于2022-03-05 github建库）

## （2022-03-05——2022-03-7）待办功能

- [x] 实现基于priority_queue实现的定时器，以完成关闭超时连接的功能

### 记于2022-03-05 23.25

1. 完成了对定时器类头文件的编写
2. 完成了用户信息数据结构类（包含客户端地址，通信socket，相应的定时器）的编写

#### 待办小项

- [x] 定时器的实现
- [x] SIGALRM信号的处理
- [x] 客户端断开连接或发生错误事件时，服务端关闭连接，移除定时器
- [x] 当客户端与服务器之间有交互，socket可读并一次性成功读完 / socket可写并一次性成功写完，更新定时器
- [x] 测试大文件的传输
- [x] 对服务器进行压力测试

### 记于2022-03-07  19.30

1. 完成了小根堆处理超时连接功能，由于堆由数组模拟实现，添加了由定时器指针到定时器在堆（数组）中下标的映射
2. 测试了大文件的传输，解决了游双老师书中进行大文件传输时，writev一次写不完而iovec结构体的指针成员与size成员未更新导致文件传输出错的问题。
3. 优化了堆的删除任意元素操作，解决了游双老师书中del_timer()函数只是将timer->函数指针销毁（即延迟销毁）在高并发持续访问下堆膨胀崩溃的问题
4. 对于服务器进行了压力测试，可实现上万的并发连接，QPS 42000+

## （2022-03-07——now）待办功能

- [x] 对项目各模块进行整理，解决vscode跨文件编译找不到头文件的问题
- [ ] 实现日志功能(实习招聘在即，暂时会将平时的重点放在准备面试上)

